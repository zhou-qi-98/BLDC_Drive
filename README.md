# 三相无刷直流电机驱动设计

![image](/4.Imgs/渲染图0.png)

#### 介绍
**stm32直流电机控制**
* 采用STM32F103C6T6A作为主控
* 采用三相逆变桥电路
* 采集三相电流
* 前级采用栅极驱动MOS，自带闭锁
* 采集电机驱动电压，与MOS电流

无刷直流电机取消了电刷和换向器，从而失去了机械的磁场换向机构，磁场换向通过传感器检测转子位置，利用转子的位置信息来控制由开关电子器件构成的换向电路来达到磁场换向的目的。在无刷直流电机发展伊始，工程师们使用模拟电路来检测转子位置和控制开关器件。随着数字信号处理器、永磁材料和电力电子器件技术的飞速发展，无刷直流电机技术向数字化，智能化迈进。

在现阶段的无刷直流电机的设计中，一款优秀的驱动器设计是十分重要的。驱动器需要正确检测到转子位置信息，而且需要可靠的控制算法来控制功率器件的开通和关断，从而实现精度高、稳定性强的控制效果。

目前，无刷直流电机的主要控制方法有：PID控制、模糊控制、滑模变结构控制、基于神经网络的控制、基于锁相环的控制等。PID控制中P是指比例，I是指积分，D是指微分。通过调整这三个参数，来实现在不同运动状态下生成不同的控制量，来控制对象来达到理想的运动状态。但是由于只有三个可调参数使得控制精度不够，所以导致其在一些需要精密控制的领域不能发挥作用。模糊控制和滑模变结构控制都是非线性的控制方式，模糊控制是运用模糊数学的理论来对一些变量比较多的复杂系统来进行控制，滑模变结构控制是让控制对象在不同的控制逻辑下来回切换，由于此时处于滑动运动状态，对未知干扰的敏感降低，使系统有比较好鲁棒性。其余的控制方式各有特点，在特定领域能对无刷直流电机有良好的控制。

在位置检测领域，一般就有位置传感器检测法和无位置传感器检测法。位置传感器有电磁式的，可以安装在定子组件上，来检测转子永磁体转动，通过磁场的变化记录转子位置信息，也有光电式的，将光源和接收器安装在定子组件上，转子上安装遮光板，当转子转动时，接收器产生的脉冲信号则是转子位置信息。无位置传感器检测法有一种H. Lehuy等人提出的反电动势检测法，这种方法不需要在电机内安装位置传感器，简化了系统的结构。还有一些学者提出过续流二极管法和基于定子磁链估计法等无位置传感器检测法。


#### 六步法
六步法中的三相电机每次只有两组绕组有电流通过，产生磁场。为了让电机旋转，一般按照Q1Q2—Q2Q3—Q3Q4—Q4Q5—Q5Q6—Q6Q1的顺序依次导通功率开关管
![image](/4.Imgs/逆变桥.png)

#### 反电动势检测法
当转子上的永磁体旋转时，会切割绕组产生反电动势，而且转速越大，其产生的反电动势也越大，这个反电动势是可以使用检测电路检测的。检测三相绕组中反电动势，根据其变化，就可以得知转子是否到达六个关键换向节点，并决定是否进行换相操作。

无刷直流电机产生的反电动势是呈梯形波形状的，而其定子电流是断续的方波形状。因为在电机转动过程中，定子中总有两相绕组会通过电流，使那两相绕组中也会生成大小相等、方向相反的反电动势。等其中一相绕组断开时，其电流立即降为零，但是反电动势会通过开关管和二极管进行续流，会由正变负或者由负变正，与下一段电流反向时的反电动势接续。在一个周期中，每相的反电动势有两次过零点，三相则可以接收到6次过零点信号，滞后30°+60°k（k=0，1，2…）后即为开关管换相的信号。
![image](/4.Imgs/反电动势.png)

#### 原理图
![image](/4.Imgs/SCH1.png)
![image](/4.Imgs/SCH2.png)

#### PCB
![image](/4.Imgs/PCB.png)



#### 软件架构
* 分时调度



#### 参与贡献
* [爱学习的王大可](https://gitee.com/zhouqi98)
* [幺幺零1223](https://gitee.com/one-zero-1223)


